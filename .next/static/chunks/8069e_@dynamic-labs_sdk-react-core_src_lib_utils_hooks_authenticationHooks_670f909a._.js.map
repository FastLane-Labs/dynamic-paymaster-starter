{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/marshabl/Dropbox/CS/typescript_practice/dynamic-paymaster-starter/node_modules/%40dynamic-labs/sdk-react-core/src/lib/utils/hooks/authenticationHooks/helpers/showPendingConnectView.js"],"sourcesContent":["'use client'\nimport { __awaiter } from '../../../../../../_virtual/_tslib.js';\nimport { getWalletProvider } from '../../../functions/getWalletProvider/getWalletProvider.js';\n\nconst specialCareWallets = ['bloctoevm', 'perawallet', 'metamaskstarknet'];\nconst showPendingConnectView = (walletConnector, pushView) => __awaiter(void 0, void 0, void 0, function* () {\n    const walletProvider = getWalletProvider(walletConnector);\n    // We don't want to show the pending connect view for qrCode and walletConnect\n    // They have their own view with qrCode so we don't need to show the pending connect view\n    if (walletProvider === 'walletConnect' || walletProvider === 'qrCode') {\n        return;\n    }\n    specialCareWallets.forEach((wallet) => {\n        if (walletConnector.key === wallet) {\n            // bloctoevm and some other wallets works different as Justin mentioned in this commit:\n            // https://github.com/dynamic-labs/DynamicAuth/commit/57233d3620611bc91439f3d4587b8516f8d16f99\n            // It needs to show the connect view before getting connected accounts\n            pushView('pending-connect');\n        }\n    });\n    const connectedAccounts = yield walletConnector.getConnectedAccounts();\n    /* istanbul ignore else */\n    if (connectedAccounts.length === 0) {\n        pushView('pending-connect');\n    }\n});\n\nexport { showPendingConnectView };\n"],"names":[],"mappings":";;;AACA;AACA;AAFA;;;AAIA,MAAM,qBAAqB;IAAC;IAAa;IAAc;CAAmB;AAC1E,MAAM,yBAAyB,CAAC,iBAAiB,WAAa,CAAA,GAAA,kLAAA,CAAA,YAAS,AAAD,EAAE,KAAK,GAAG,KAAK,GAAG,KAAK,GAAG;QAC5F,MAAM,iBAAiB,CAAA,GAAA,0OAAA,CAAA,oBAAiB,AAAD,EAAE;QACzC,8EAA8E;QAC9E,yFAAyF;QACzF,IAAI,mBAAmB,mBAAmB,mBAAmB,UAAU;YACnE;QACJ;QACA,mBAAmB,OAAO,CAAC,CAAC;YACxB,IAAI,gBAAgB,GAAG,KAAK,QAAQ;gBAChC,uFAAuF;gBACvF,8FAA8F;gBAC9F,sEAAsE;gBACtE,SAAS;YACb;QACJ;QACA,MAAM,oBAAoB,MAAM,gBAAgB,oBAAoB;QACpE,wBAAwB,GACxB,IAAI,kBAAkB,MAAM,KAAK,GAAG;YAChC,SAAS;QACb;IACJ","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 47, "column": 0}, "map": {"version":3,"sources":["file:///Users/marshabl/Dropbox/CS/typescript_practice/dynamic-paymaster-starter/node_modules/%40dynamic-labs/sdk-react-core/src/lib/utils/hooks/authenticationHooks/helpers/isConnectOnly.js"],"sourcesContent":["'use client'\nconst isConnectOnly = (user, authMode) => {\n    // we need to check for user because of connect-only (authenticated)\n    // and linking a new wallet in mutliwallet\n    const linking = user !== undefined;\n    const connectOnly = authMode === 'connect-only' && !linking;\n    return connectOnly;\n};\n\nexport { isConnectOnly };\n"],"names":[],"mappings":";;;AAAA;AACA,MAAM,gBAAgB,CAAC,MAAM;IACzB,oEAAoE;IACpE,0CAA0C;IAC1C,MAAM,UAAU,SAAS;IACzB,MAAM,cAAc,aAAa,kBAAkB,CAAC;IACpD,OAAO;AACX","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 65, "column": 0}, "map": {"version":3,"sources":["file:///Users/marshabl/Dropbox/CS/typescript_practice/dynamic-paymaster-starter/node_modules/%40dynamic-labs/sdk-react-core/src/lib/utils/hooks/authenticationHooks/useConnectAndSign/useConnectAndSign.js"],"sourcesContent":["'use client'\nimport { __awaiter } from '../../../../../../_virtual/_tslib.js';\nimport { StorageService, CustomError } from '@dynamic-labs/utils';\nimport { isEmailWalletConnector, isEmailOTPWalletConnector, isBloctoConnector } from '@dynamic-labs/wallet-connector-core';\nimport { useCaptchaContext } from '../../../../context/CaptchaContext/CaptchaContext.js';\nimport 'react';\nimport '../../../../context/DynamicContext/DynamicContext.js';\nimport '@dynamic-labs/sdk-api-core';\nimport { logger } from '../../../../shared/logger.js';\nimport '@dynamic-labs/iconic';\nimport 'react/jsx-runtime';\nimport { useViewContext } from '../../../../context/ViewContext/ViewContext.js';\nimport '@dynamic-labs/wallet-book';\nimport { LAST_USED_WALLET } from '../../../constants/localStorage.js';\nimport '../../../constants/colors.js';\nimport '../../../constants/values.js';\nimport '../../../../shared/consts/index.js';\nimport '../../../../events/dynamicEvents.js';\nimport { useErrorContext } from '../../../../context/ErrorContext/ErrorContext.js';\nimport '@dynamic-labs/multi-wallet';\nimport 'react-international-phone';\nimport '../../../../store/state/nonce/nonce.js';\nimport { isProgrammableNetworkSwitchSupported } from '../../../functions/isProgrammableNetworkSwitchSupported/isProgrammableNetworkSwitchSupported.js';\nimport { isSupportedNetwork } from '../../../functions/isSupportedNetwork/isSupportedNetwork.js';\nimport '../../../../store/state/projectSettings/projectSettings.js';\nimport '../../../../config/ApiEndpoint.js';\nimport '../../../../store/state/user/user.js';\nimport '../../../../locale/locale.js';\nimport '../../../../store/state/dynamicContextProps/dynamicContextProps.js';\nimport '../../../../store/state/primaryWalletId/primaryWalletId.js';\nimport { useHandleWalletsToConnect } from '../../useHandleWalletsToConnect/useHandleWalletsToConnect.js';\nimport { useVerifyWallet } from '../../useVerifyWallet/useVerifyWallet.js';\nimport { showPendingConnectView } from '../helpers/showPendingConnectView.js';\nimport { isConnectOnly } from '../helpers/isConnectOnly.js';\nimport '../../../../context/VerificationContext/VerificationContext.js';\nimport 'react-dom';\nimport '../../../functions/compareChains/compareChains.js';\nimport '../../../../context/ThemeContext/ThemeContext.js';\nimport '../../useUserUpdateRequest/useUpdateUser/userFieldsSchema.js';\nimport 'bs58';\nimport '@dynamic-labs/types';\nimport '../../../../context/SocialRedirectContext/SocialRedirectContext.js';\nimport '../../../../context/AccountExistsContext/AccountExistsContext.js';\nimport '../../../../context/LoadingContext/LoadingContext.js';\nimport '../../../../context/WalletContext/WalletContext.js';\nimport '../../../../context/UserWalletsContext/UserWalletsContext.js';\nimport '../../useEmbeddedWallet/useSecureEnclaveEmbeddedWallet/constants.js';\nimport '../../../../context/AccessDeniedContext/AccessDeniedContext.js';\nimport 'yup';\nimport '../../../../context/MockContext/MockContext.js';\nimport '../../../../views/CollectUserDataView/useFields.js';\nimport '../../../../context/FieldsStateContext/FieldsStateContext.js';\nimport '../../../../context/UserFieldEditorContext/UserFieldEditorContext.js';\nimport '@dynamic-labs/rpc-providers';\nimport '../../../../store/state/loadingAndLifecycle.js';\nimport '../../../../store/state/walletOptions/walletOptions.js';\nimport 'react-i18next';\nimport '../../../../components/Accordion/components/AccordionItem/AccordionItem.js';\nimport '../../../../components/Alert/Alert.js';\nimport '../../../../components/ShadowDOM/ShadowDOM.js';\nimport '../../../../components/IconButton/IconButton.js';\nimport '../../../../components/InlineWidget/InlineWidget.js';\nimport '../../../../components/Input/Input.js';\nimport '../../../../components/IsBrowser/IsBrowser.js';\nimport '../../../../components/MenuList/Dropdown/Dropdown.js';\nimport '../../../../components/OverlayCard/OverlayCard.js';\nimport '../../../../components/Transition/ZoomTransition/ZoomTransition.js';\nimport '../../../../components/Transition/SlideInUpTransition/SlideInUpTransition.js';\nimport '../../../../components/Transition/OpacityTransition/OpacityTransition.js';\nimport '../../../../components/PasskeyCreatedSuccessBanner/PasskeyCreatedSuccessBanner.js';\nimport '../../../../components/Popper/Popper/Popper.js';\nimport '../../../../components/Popper/PopperContext/PopperContext.js';\nimport 'react-focus-lock';\nimport 'qrcode';\nimport 'formik';\nimport '../../useSubdomainCheck/useSubdomainCheck.js';\nimport '../../../../context/WalletGroupContext/WalletGroupContext.js';\nimport '../../../../context/IpConfigurationContext/IpConfigurationContext.js';\nimport '../../../../context/ConnectWithOtpContext/ConnectWithOtpContext.js';\nimport '../../../../context/ConnectWithOtpContext/constants.js';\nimport '../../../../widgets/DynamicBridgeWidget/views/WalletsView/components/SecondaryWallets/SecondaryWallets.js';\nimport '@hcaptcha/react-hcaptcha';\nimport '../../../../widgets/DynamicWidget/context/DynamicWidgetContext.js';\nimport '../../../../context/FooterAnimationContext/index.js';\nimport '../../../../context/ErrorContext/hooks/useErrorText/useErrorText.js';\nimport '../../../../context/PasskeyContext/PasskeyContext.js';\nimport '../../../../store/state/sendBalances.js';\nimport '../../../../store/state/connectorsInitializing/connectorsInitializing.js';\nimport '../../../../components/OverlayCardBase/OverlayCardTarget/OverlayCardTarget.js';\nimport '../../../../widgets/DynamicWidget/components/DynamicWidgetHeader/DynamicWidgetHeader.js';\nimport '../../../../views/TransactionConfirmationView/TransactionConfirmationView.js';\nimport '../../../../widgets/DynamicWidget/views/ManagePasskeysWidgetView/PasskeyCard/PasskeyCard.js';\nimport '../../../../context/OnrampContext/OnrampContext.js';\nimport '../../../../widgets/DynamicWidget/views/ReceiveWalletFunds/ReceiveWalletFunds.js';\nimport '../../../../../index.js';\nimport '../../../../store/state/tokenBalances.js';\nimport '../../../../shared/utils/functions/getInitialUrl/getInitialUrl.js';\nimport { useInternalDynamicContext } from '../../../../context/DynamicContext/useDynamicContext/useInternalDynamicContext.js';\n\nconst useConnectAndSign = ({ shouldUpdateWallets = true, shouldCallCallback = true, } = {}) => {\n    const { pushView, clearStackAndPushInitialView, replaceView } = useViewContext();\n    const { engageCaptcha, getCaptchaToken } = useCaptchaContext();\n    const { setErrorMessage, setError, setDefaultError } = useErrorContext();\n    const { authMode, connectWallet, displaySiweStatement, environmentId, projectSettings, networkValidationMode, setIsSingleWalletAccount, user, walletUiUtils, } = useInternalDynamicContext();\n    const { handleWalletsToConnect } = useHandleWalletsToConnect();\n    const verifyWallet = useVerifyWallet({\n        displaySiweStatement,\n        environmentId,\n        projectSettings,\n        setIsSingleWalletAccount,\n    });\n    const handleWalletVerify = (walletConnector, publicWalletAddress, captchaToken) => __awaiter(void 0, void 0, void 0, function* () {\n        if (!isEmailWalletConnector(walletConnector) ||\n            isBloctoConnector(walletConnector)) {\n            replaceView('pending-signature');\n        }\n        else {\n            walletUiUtils.disabledConfirmationOnce();\n        }\n        yield verifyWallet({\n            captchaToken,\n            publicWalletAddress,\n            walletConnector,\n        });\n    });\n    const handleWalletVerifyError = (err) => {\n        var _a;\n        const userCancelled = (err === null || err === void 0 ? void 0 : err.code) === 'user-cancelled';\n        if (!userCancelled)\n            logger.debug(err);\n        setErrorMessage((_a = err === null || err === void 0 ? void 0 : err.code) === null || _a === void 0 ? void 0 : _a.toString());\n        clearStackAndPushInitialView();\n    };\n    const handleWalletConnectionError = (error) => {\n        clearStackAndPushInitialView();\n        if (error instanceof CustomError) {\n            setError(error.message, error.code);\n        }\n        else {\n            setDefaultError();\n        }\n    };\n    return (_a) => __awaiter(void 0, [_a], void 0, function* ({ walletConnector, getAddressOpts = undefined, }) {\n        var _b;\n        try {\n            yield showPendingConnectView(walletConnector, pushView);\n            if (isEmailWalletConnector(walletConnector)) {\n                if (isEmailOTPWalletConnector(walletConnector)) {\n                    pushView('email-wallet-otp-verification-view');\n                }\n                else if (!isBloctoConnector(walletConnector)) {\n                    pushView('wait-for-email-confirmation-view');\n                }\n            }\n            let connectionResult;\n            try {\n                connectionResult = yield connectWallet(walletConnector, getAddressOpts, {\n                    applyHandleConnectedWallet: shouldCallCallback,\n                });\n            }\n            catch (error) {\n                handleWalletConnectionError(error);\n                return;\n            }\n            // Fallback to catch any errors that were missed.\n            if (!(connectionResult === null || connectionResult === void 0 ? void 0 : connectionResult.address)) {\n                handleWalletConnectionError();\n                return;\n            }\n            const { address } = connectionResult;\n            const walletNetwork = yield walletConnector.getNetwork(true);\n            const usesSupportedNetwork = isSupportedNetwork({\n                network: walletNetwork,\n                walletConnector,\n            });\n            const isNetworkValidationEnabledForSignIn = networkValidationMode === 'always' ||\n                networkValidationMode === 'sign-in';\n            if (!usesSupportedNetwork && isNetworkValidationEnabledForSignIn) {\n                if (!isProgrammableNetworkSwitchSupported(walletConnector)) {\n                    return pushView('network-not-supported-manual');\n                }\n                return pushView('network-not-supported');\n            }\n            if (isConnectOnly(user, authMode)) {\n                StorageService.setItem(LAST_USED_WALLET, walletConnector.key);\n                if (shouldUpdateWallets) {\n                    handleWalletsToConnect({ walletConnector });\n                }\n                return;\n            }\n            if ((_b = projectSettings === null || projectSettings === void 0 ? void 0 : projectSettings.security.hCaptcha) === null || _b === void 0 ? void 0 : _b.enabled) {\n                engageCaptcha({\n                    authMethod: 'wallet',\n                    onCaptchaSuccess: (captchaToken) => __awaiter(void 0, void 0, void 0, function* () {\n                        try {\n                            yield handleWalletVerify(walletConnector, address, captchaToken);\n                        }\n                        catch (e) {\n                            handleWalletVerifyError(e);\n                        }\n                    }),\n                });\n                return;\n            }\n            yield handleWalletVerify(walletConnector, address, getCaptchaToken());\n        }\n        catch (err) {\n            handleWalletVerifyError(err);\n        }\n    });\n};\n\nexport { useConnectAndSign };\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 381, "column": 0}, "map": {"version":3,"sources":["file:///Users/marshabl/Dropbox/CS/typescript_practice/dynamic-paymaster-starter/node_modules/%40dynamic-labs/sdk-react-core/src/lib/utils/hooks/authenticationHooks/useConnectAndSignSplitSteps/useConnectAndSignSplitSteps.js"],"sourcesContent":["'use client'\nimport { __awaiter } from '../../../../../../_virtual/_tslib.js';\nimport { StorageService, MissingPublicAddressError, isMobile } from '@dynamic-labs/utils';\nimport { useCaptchaContext } from '../../../../context/CaptchaContext/CaptchaContext.js';\nimport 'react';\nimport '../../../../context/DynamicContext/DynamicContext.js';\nimport '@dynamic-labs/sdk-api-core';\nimport { logger } from '../../../../shared/logger.js';\nimport '@dynamic-labs/iconic';\nimport '@dynamic-labs/wallet-connector-core';\nimport 'react/jsx-runtime';\nimport { useViewContext } from '../../../../context/ViewContext/ViewContext.js';\nimport '@dynamic-labs/wallet-book';\nimport { LAST_USED_WALLET } from '../../../constants/localStorage.js';\nimport '../../../constants/colors.js';\nimport '../../../constants/values.js';\nimport '../../../../shared/consts/index.js';\nimport '../../../../events/dynamicEvents.js';\nimport { useErrorContext } from '../../../../context/ErrorContext/ErrorContext.js';\nimport '@dynamic-labs/multi-wallet';\nimport 'react-international-phone';\nimport '../../../../store/state/nonce/nonce.js';\nimport { isProgrammableNetworkSwitchSupported } from '../../../functions/isProgrammableNetworkSwitchSupported/isProgrammableNetworkSwitchSupported.js';\nimport { isSupportedNetwork } from '../../../functions/isSupportedNetwork/isSupportedNetwork.js';\nimport '../../../../store/state/projectSettings/projectSettings.js';\nimport '../../../../config/ApiEndpoint.js';\nimport '../../../../store/state/user/user.js';\nimport '../../../../locale/locale.js';\nimport '../../../../store/state/dynamicContextProps/dynamicContextProps.js';\nimport '../../../../store/state/primaryWalletId/primaryWalletId.js';\nimport { useHandleWalletsToConnect } from '../../useHandleWalletsToConnect/useHandleWalletsToConnect.js';\nimport { useVerifyWallet } from '../../useVerifyWallet/useVerifyWallet.js';\nimport { showPendingConnectView } from '../helpers/showPendingConnectView.js';\nimport { isConnectOnly } from '../helpers/isConnectOnly.js';\nimport '../../../../context/VerificationContext/VerificationContext.js';\nimport 'react-dom';\nimport '../../../functions/compareChains/compareChains.js';\nimport '../../../../context/ThemeContext/ThemeContext.js';\nimport '../../useUserUpdateRequest/useUpdateUser/userFieldsSchema.js';\nimport 'bs58';\nimport '@dynamic-labs/types';\nimport '../../../../context/SocialRedirectContext/SocialRedirectContext.js';\nimport '../../../../context/AccountExistsContext/AccountExistsContext.js';\nimport '../../../../context/LoadingContext/LoadingContext.js';\nimport '../../../../context/WalletContext/WalletContext.js';\nimport '../../../../context/UserWalletsContext/UserWalletsContext.js';\nimport '../../useEmbeddedWallet/useSecureEnclaveEmbeddedWallet/constants.js';\nimport '../../../../context/AccessDeniedContext/AccessDeniedContext.js';\nimport 'yup';\nimport '../../../../context/MockContext/MockContext.js';\nimport '../../../../views/CollectUserDataView/useFields.js';\nimport '../../../../context/FieldsStateContext/FieldsStateContext.js';\nimport '../../../../context/UserFieldEditorContext/UserFieldEditorContext.js';\nimport '@dynamic-labs/rpc-providers';\nimport '../../../../store/state/loadingAndLifecycle.js';\nimport '../../../../store/state/walletOptions/walletOptions.js';\nimport 'react-i18next';\nimport '../../../../components/Accordion/components/AccordionItem/AccordionItem.js';\nimport '../../../../components/Alert/Alert.js';\nimport '../../../../components/ShadowDOM/ShadowDOM.js';\nimport '../../../../components/IconButton/IconButton.js';\nimport '../../../../components/InlineWidget/InlineWidget.js';\nimport '../../../../components/Input/Input.js';\nimport '../../../../components/IsBrowser/IsBrowser.js';\nimport '../../../../components/MenuList/Dropdown/Dropdown.js';\nimport '../../../../components/OverlayCard/OverlayCard.js';\nimport '../../../../components/Transition/ZoomTransition/ZoomTransition.js';\nimport '../../../../components/Transition/SlideInUpTransition/SlideInUpTransition.js';\nimport '../../../../components/Transition/OpacityTransition/OpacityTransition.js';\nimport '../../../../components/PasskeyCreatedSuccessBanner/PasskeyCreatedSuccessBanner.js';\nimport '../../../../components/Popper/Popper/Popper.js';\nimport '../../../../components/Popper/PopperContext/PopperContext.js';\nimport 'react-focus-lock';\nimport 'qrcode';\nimport 'formik';\nimport '../../useSubdomainCheck/useSubdomainCheck.js';\nimport '../../../../context/WalletGroupContext/WalletGroupContext.js';\nimport '../../../../context/IpConfigurationContext/IpConfigurationContext.js';\nimport '../../../../context/ConnectWithOtpContext/ConnectWithOtpContext.js';\nimport '../../../../context/ConnectWithOtpContext/constants.js';\nimport '../../../../widgets/DynamicBridgeWidget/views/WalletsView/components/SecondaryWallets/SecondaryWallets.js';\nimport '@hcaptcha/react-hcaptcha';\nimport '../../../../widgets/DynamicWidget/context/DynamicWidgetContext.js';\nimport '../../../../context/FooterAnimationContext/index.js';\nimport '../../../../context/ErrorContext/hooks/useErrorText/useErrorText.js';\nimport '../../../../context/PasskeyContext/PasskeyContext.js';\nimport '../../../../store/state/sendBalances.js';\nimport '../../../../store/state/connectorsInitializing/connectorsInitializing.js';\nimport '../../../../components/OverlayCardBase/OverlayCardTarget/OverlayCardTarget.js';\nimport '../../../../widgets/DynamicWidget/components/DynamicWidgetHeader/DynamicWidgetHeader.js';\nimport '../../../../views/TransactionConfirmationView/TransactionConfirmationView.js';\nimport '../../../../widgets/DynamicWidget/views/ManagePasskeysWidgetView/PasskeyCard/PasskeyCard.js';\nimport '../../../../context/OnrampContext/OnrampContext.js';\nimport '../../../../widgets/DynamicWidget/views/ReceiveWalletFunds/ReceiveWalletFunds.js';\nimport '../../../../../index.js';\nimport '../../../../store/state/tokenBalances.js';\nimport '../../../../shared/utils/functions/getInitialUrl/getInitialUrl.js';\nimport { useInternalDynamicContext } from '../../../../context/DynamicContext/useDynamicContext/useInternalDynamicContext.js';\n\nconst useConnectAndSignSplitSteps = () => {\n    const { pushView, clearStackAndPushInitialView } = useViewContext();\n    const { setErrorMessage } = useErrorContext();\n    const { getCaptchaToken, engageCaptcha } = useCaptchaContext();\n    const { connectWallet, displaySiweStatement, projectSettings, environmentId, networkValidationMode, setIsSingleWalletAccount, setShowAuthFlow, user, authMode, } = useInternalDynamicContext();\n    const { handleWalletsToConnect } = useHandleWalletsToConnect();\n    const verifyWallet = useVerifyWallet({\n        displaySiweStatement,\n        environmentId,\n        projectSettings,\n        setIsSingleWalletAccount,\n    });\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const onErrorHandler = (err) => {\n        var _a;\n        logger.debug(err);\n        /**\n         * On mobile, when the user is redirected to the wallet mobile app, this error is thrown.\n         * We want to stay in whichever view we currently are, most likely mobile-wallet-redirect-view\n         */\n        if (err instanceof MissingPublicAddressError && isMobile())\n            return;\n        clearStackAndPushInitialView();\n        setErrorMessage((_a = err.code) !== null && _a !== void 0 ? _a : err.toString());\n    };\n    // This method is similar to useConnectAndSign, but it skips signing for now\n    // It's used when we want to connect and sign in two separate steps\n    // For example on mobile when we want to sign on button click\n    // or in Dapper\n    const onlyConnectUser = (_a) => __awaiter(void 0, [_a], void 0, function* ({ walletConnector, getAddressOpts = undefined, shouldShowPendingConnectView = true, }) {\n        var _b;\n        if (shouldShowPendingConnectView)\n            yield showPendingConnectView(walletConnector, pushView);\n        try {\n            yield connectWallet(walletConnector, getAddressOpts);\n            if (isConnectOnly(user, authMode)) {\n                StorageService.setItem(LAST_USED_WALLET, walletConnector.key);\n                handleWalletsToConnect({ walletConnector });\n                return;\n            }\n            if ((_b = projectSettings === null || projectSettings === void 0 ? void 0 : projectSettings.security.hCaptcha) === null || _b === void 0 ? void 0 : _b.enabled) {\n                engageCaptcha({\n                    authMethod: 'wallet',\n                    onCaptchaSuccess: (_captchaToken) => __awaiter(void 0, void 0, void 0, function* () {\n                        setShowAuthFlow(true);\n                        pushView('pending-signature');\n                    }),\n                });\n                return;\n            }\n            setShowAuthFlow(true);\n            pushView('pending-signature');\n        }\n        catch (err) {\n            onErrorHandler(err);\n            return;\n        }\n    });\n    // This method is similar to useConnectAndSign, but it does not call showPendingConnectView\n    // This is because we already called it in onlyConnectUser and now we just want to sign\n    const signAlreadyConnectedUser = (_c) => __awaiter(void 0, [_c], void 0, function* ({ walletConnector, getAddressOpts = undefined, }) {\n        try {\n            const connectionResult = yield connectWallet(walletConnector, getAddressOpts);\n            if (!(connectionResult === null || connectionResult === void 0 ? void 0 : connectionResult.address)) {\n                return;\n            }\n            const walletNetwork = yield walletConnector.getNetwork(true);\n            const usesSupportedNetwork = isSupportedNetwork({\n                network: walletNetwork,\n                walletConnector,\n            });\n            const isNetworkValidationEnabledForSignIn = networkValidationMode === 'always' ||\n                networkValidationMode === 'sign-in';\n            if (!usesSupportedNetwork && isNetworkValidationEnabledForSignIn) {\n                if (!isProgrammableNetworkSwitchSupported(walletConnector)) {\n                    return pushView('network-not-supported-manual');\n                }\n                return pushView('network-not-supported');\n            }\n            yield verifyWallet({\n                captchaToken: getCaptchaToken(),\n                publicWalletAddress: connectionResult.address,\n                walletConnector,\n            });\n        }\n        catch (err) {\n            onErrorHandler(err);\n            return;\n        }\n    });\n    return {\n        onlyConnectUser,\n        signAlreadyConnectedUser,\n    };\n};\n\nexport { useConnectAndSignSplitSteps };\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 683, "column": 0}, "map": {"version":3,"sources":["file:///Users/marshabl/Dropbox/CS/typescript_practice/dynamic-paymaster-starter/node_modules/%40dynamic-labs/sdk-react-core/src/lib/utils/hooks/authenticationHooks/useOtpVerificationRequest/useOtpVerificationRequest.js"],"sourcesContent":["'use client'\nimport { __awaiter } from '../../../../../../_virtual/_tslib.js';\nimport { useMemo, useCallback } from 'react';\nimport { DynamicError } from '@dynamic-labs/utils';\nimport '../../../../events/dynamicEvents.js';\nimport '../../../../context/DynamicContext/DynamicContext.js';\nimport '@dynamic-labs/sdk-api-core';\nimport '../../../../shared/logger.js';\nimport '@dynamic-labs/iconic';\nimport '@dynamic-labs/wallet-connector-core';\nimport 'react/jsx-runtime';\nimport '../../../../context/ViewContext/ViewContext.js';\nimport '@dynamic-labs/wallet-book';\nimport '../../../constants/colors.js';\nimport '../../../constants/values.js';\nimport '../../../../shared/consts/index.js';\nimport { useInternalDynamicContext } from '../../../../context/DynamicContext/useDynamicContext/useInternalDynamicContext.js';\nimport '../../../../context/CaptchaContext/CaptchaContext.js';\nimport '../../../../context/ErrorContext/ErrorContext.js';\nimport { USER_NOT_LOGGED_IN } from '../../../constants/errors.js';\nimport '@dynamic-labs/multi-wallet';\nimport 'react-international-phone';\nimport '../../../../store/state/nonce/nonce.js';\nimport '../../../../store/state/projectSettings/projectSettings.js';\nimport { verifyEmail } from '../../../../data/api/email/email.js';\nimport { storeAuthTokenAndUser } from '../../../../store/state/user/storeAuthTokenAndUser/storeAuthTokenAndUser.js';\nimport '../../../../store/state/user/user.js';\nimport '../../../../config/ApiEndpoint.js';\nimport { verifySms } from '../../../../data/api/sms/sms.js';\nimport { getVerificationDestinationFromNextView } from '../../../functions/getVerificationDestinationFromNextView/getVerificationDestinationFromNextView.js';\nimport '../../../../store/state/dynamicContextProps/dynamicContextProps.js';\nimport '../../../../store/state/primaryWalletId/primaryWalletId.js';\nimport '../../../../context/AccessDeniedContext/AccessDeniedContext.js';\nimport '../../../../context/AccountExistsContext/AccountExistsContext.js';\nimport '../../../../context/UserWalletsContext/UserWalletsContext.js';\nimport '../../../../store/state/connectedWalletsInfo/connectedWalletsInfo.js';\nimport { useVerification } from '../../../../context/VerificationContext/VerificationContext.js';\nimport 'react-dom';\nimport '../../../functions/compareChains/compareChains.js';\nimport '../../../../context/ThemeContext/ThemeContext.js';\nimport { useHandleVerificationRequired } from '../../useHandleVerificationRequired/useHandleVerificationRequired.js';\nimport 'bs58';\nimport '@dynamic-labs/types';\nimport '../../../../context/SocialRedirectContext/SocialRedirectContext.js';\nimport '../../../../context/LoadingContext/LoadingContext.js';\nimport '../../../../context/WalletContext/WalletContext.js';\nimport '../../useEmbeddedWallet/useSecureEnclaveEmbeddedWallet/constants.js';\nimport 'yup';\nimport '../../../../context/MockContext/MockContext.js';\nimport '../../../../views/CollectUserDataView/useFields.js';\nimport '../../../../context/FieldsStateContext/FieldsStateContext.js';\nimport '../../useUserUpdateRequest/useUpdateUser/userFieldsSchema.js';\nimport '../../../../context/UserFieldEditorContext/UserFieldEditorContext.js';\nimport '@dynamic-labs/rpc-providers';\nimport '../../../../store/state/loadingAndLifecycle.js';\nimport '../../../../store/state/walletOptions/walletOptions.js';\nimport 'react-i18next';\nimport '../../../../components/Accordion/components/AccordionItem/AccordionItem.js';\nimport '../../../../components/Alert/Alert.js';\nimport '../../../../components/ShadowDOM/ShadowDOM.js';\nimport '../../../../components/IconButton/IconButton.js';\nimport '../../../../components/InlineWidget/InlineWidget.js';\nimport '../../../../components/Input/Input.js';\nimport '../../../../components/IsBrowser/IsBrowser.js';\nimport '../../../../components/MenuList/Dropdown/Dropdown.js';\nimport '../../../../components/OverlayCard/OverlayCard.js';\nimport '../../../../components/Transition/ZoomTransition/ZoomTransition.js';\nimport '../../../../components/Transition/SlideInUpTransition/SlideInUpTransition.js';\nimport '../../../../components/Transition/OpacityTransition/OpacityTransition.js';\nimport '../../../../components/PasskeyCreatedSuccessBanner/PasskeyCreatedSuccessBanner.js';\nimport '../../../../components/Popper/Popper/Popper.js';\nimport '../../../../components/Popper/PopperContext/PopperContext.js';\nimport 'react-focus-lock';\nimport 'qrcode';\nimport 'formik';\nimport '../../useSubdomainCheck/useSubdomainCheck.js';\nimport '../../../../context/WalletGroupContext/WalletGroupContext.js';\nimport '../../../../context/IpConfigurationContext/IpConfigurationContext.js';\nimport '../../../../context/ConnectWithOtpContext/ConnectWithOtpContext.js';\nimport '../../../../context/ConnectWithOtpContext/constants.js';\nimport '../../../../widgets/DynamicBridgeWidget/views/WalletsView/components/SecondaryWallets/SecondaryWallets.js';\nimport '../../../../locale/locale.js';\nimport '@hcaptcha/react-hcaptcha';\nimport '../../../../widgets/DynamicWidget/context/DynamicWidgetContext.js';\nimport '../../../../context/FooterAnimationContext/index.js';\nimport '../../../../context/ErrorContext/hooks/useErrorText/useErrorText.js';\nimport '../../../../context/PasskeyContext/PasskeyContext.js';\nimport '../../../../store/state/sendBalances.js';\nimport '../../../../store/state/connectorsInitializing/connectorsInitializing.js';\nimport '../../../../components/OverlayCardBase/OverlayCardTarget/OverlayCardTarget.js';\nimport '../../../../widgets/DynamicWidget/components/DynamicWidgetHeader/DynamicWidgetHeader.js';\nimport '../../../../views/TransactionConfirmationView/TransactionConfirmationView.js';\nimport '../../../../widgets/DynamicWidget/views/ManagePasskeysWidgetView/PasskeyCard/PasskeyCard.js';\nimport '../../../../context/OnrampContext/OnrampContext.js';\nimport '../../../../widgets/DynamicWidget/views/ReceiveWalletFunds/ReceiveWalletFunds.js';\nimport '../../../../../index.js';\nimport '../../../../store/state/tokenBalances.js';\nimport '../../../../shared/utils/functions/getInitialUrl/getInitialUrl.js';\n\n/**\n * Same as useOtpVerificationRequest, but requires you to pass it a handleVerificationRequired method as param.\n * This is to avoid a circular logic issue, as handleVerificationRequired needs to use the logic in this file as well.\n */\nconst useOtpVerificationRequestRaw = () => {\n    const { environmentId, user, userWithMissingInfo } = useInternalDynamicContext();\n    const { verificationUUID: contextVerificationUUID } = useVerification();\n    const verifyOtp = useCallback((handleVerificationRequired, verificationToken, destination, localVerificationUUID) => __awaiter(void 0, void 0, void 0, function* () {\n        var _a;\n        if (!user && !userWithMissingInfo)\n            throw new DynamicError(USER_NOT_LOGGED_IN);\n        // VerificationUUID is saved in the context in case the view changes\n        // after a profile update (changing the view from edit profile to verify email)\n        if (!localVerificationUUID && !contextVerificationUUID)\n            throw new DynamicError('No verification UUID is available');\n        const verificationUUID = (localVerificationUUID !== null && localVerificationUUID !== void 0 ? localVerificationUUID : contextVerificationUUID);\n        const verify = destination === 'email' ? verifyEmail : verifySms;\n        const updateSelfResponse = yield verify({\n            environmentId,\n            verificationToken,\n            verificationUUID,\n        });\n        const updatedUser = updateSelfResponse.user;\n        const missingFields = (_a = updatedUser === null || updatedUser === void 0 ? void 0 : updatedUser.missingFields) !== null && _a !== void 0 ? _a : [];\n        const requiredVerificationDestination = getVerificationDestinationFromNextView(updateSelfResponse.nextView);\n        // If verification is not needed then we can update the user profile immediately.\n        storeAuthTokenAndUser(updateSelfResponse);\n        if (requiredVerificationDestination)\n            return handleVerificationRequired({\n                destination: requiredVerificationDestination,\n                missingFields,\n                updateUserProfileResponse: updateSelfResponse,\n            });\n        return {\n            isEmailVerificationRequired: false,\n            isSmsVerificationRequired: false,\n            missingFields,\n            updateUserProfileResponse: updateSelfResponse,\n        };\n    }), [contextVerificationUUID, environmentId, user, userWithMissingInfo]);\n    return { verifyOtp };\n};\n/**\n * Hook to make verifications and already handle nuances like handling additional verifications\n * and setting the user jwt on success\n */\n// ATTENTION: THIS IS EXPOSED TO THE PUBLIC!\nconst useOtpVerificationRequest = () => {\n    const handleVerificationRequired = useHandleVerificationRequired();\n    const { verifyOtp } = useOtpVerificationRequestRaw();\n    return useMemo(() => ({\n        verifyOtp: (token, destination, verificationUUID) => verifyOtp(handleVerificationRequired, token, destination, verificationUUID),\n    }), [handleVerificationRequired, verifyOtp]);\n};\n\nexport { useOtpVerificationRequest, useOtpVerificationRequestRaw };\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 956, "column": 0}, "map": {"version":3,"sources":["file:///Users/marshabl/Dropbox/CS/typescript_practice/dynamic-paymaster-starter/node_modules/%40dynamic-labs/sdk-react-core/src/lib/utils/hooks/authenticationHooks/useSignConnectOnlyUser/useSignConnectOnlyUser.js"],"sourcesContent":["'use client'\nimport { __awaiter } from '../../../../../../_virtual/_tslib.js';\nimport { isEmbeddedConnector, isBloctoConnector } from '@dynamic-labs/wallet-connector-core';\nimport 'react';\nimport '../../../../context/DynamicContext/DynamicContext.js';\nimport '@dynamic-labs/sdk-api-core';\nimport { logger } from '../../../../shared/logger.js';\nimport '@dynamic-labs/iconic';\nimport 'react/jsx-runtime';\nimport { useViewContext } from '../../../../context/ViewContext/ViewContext.js';\nimport '@dynamic-labs/wallet-book';\nimport '@dynamic-labs/utils';\nimport '../../../constants/colors.js';\nimport '../../../constants/values.js';\nimport '../../../../shared/consts/index.js';\nimport '../../../../events/dynamicEvents.js';\nimport { useCaptchaContext } from '../../../../context/CaptchaContext/CaptchaContext.js';\nimport { useErrorContext } from '../../../../context/ErrorContext/ErrorContext.js';\nimport '@dynamic-labs/multi-wallet';\nimport 'react-international-phone';\nimport '../../../../store/state/nonce/nonce.js';\nimport '../../../../store/state/projectSettings/projectSettings.js';\nimport '../../../../config/ApiEndpoint.js';\nimport '../../../../store/state/user/user.js';\nimport '../../../../locale/locale.js';\nimport '../../../../store/state/dynamicContextProps/dynamicContextProps.js';\nimport '../../../../store/state/primaryWalletId/primaryWalletId.js';\nimport { useVerifyWallet } from '../../useVerifyWallet/useVerifyWallet.js';\nimport '../../../../context/VerificationContext/VerificationContext.js';\nimport 'react-dom';\nimport '../../../functions/compareChains/compareChains.js';\nimport '../../../../context/ThemeContext/ThemeContext.js';\nimport '../../useUserUpdateRequest/useUpdateUser/userFieldsSchema.js';\nimport 'bs58';\nimport '@dynamic-labs/types';\nimport '../../../../context/SocialRedirectContext/SocialRedirectContext.js';\nimport '../../../../context/AccountExistsContext/AccountExistsContext.js';\nimport '../../../../context/LoadingContext/LoadingContext.js';\nimport '../../../../context/WalletContext/WalletContext.js';\nimport '../../../../context/UserWalletsContext/UserWalletsContext.js';\nimport '../../useEmbeddedWallet/useSecureEnclaveEmbeddedWallet/constants.js';\nimport '../../../../context/AccessDeniedContext/AccessDeniedContext.js';\nimport 'yup';\nimport '../../../../context/MockContext/MockContext.js';\nimport '../../../../views/CollectUserDataView/useFields.js';\nimport '../../../../context/FieldsStateContext/FieldsStateContext.js';\nimport '../../../../context/UserFieldEditorContext/UserFieldEditorContext.js';\nimport '@dynamic-labs/rpc-providers';\nimport '../../../../store/state/loadingAndLifecycle.js';\nimport '../../../../store/state/walletOptions/walletOptions.js';\nimport 'react-i18next';\nimport '../../../../components/Accordion/components/AccordionItem/AccordionItem.js';\nimport '../../../../components/Alert/Alert.js';\nimport '../../../../components/ShadowDOM/ShadowDOM.js';\nimport '../../../../components/IconButton/IconButton.js';\nimport '../../../../components/InlineWidget/InlineWidget.js';\nimport '../../../../components/Input/Input.js';\nimport '../../../../components/IsBrowser/IsBrowser.js';\nimport '../../../../components/MenuList/Dropdown/Dropdown.js';\nimport '../../../../components/OverlayCard/OverlayCard.js';\nimport '../../../../components/Transition/ZoomTransition/ZoomTransition.js';\nimport '../../../../components/Transition/SlideInUpTransition/SlideInUpTransition.js';\nimport '../../../../components/Transition/OpacityTransition/OpacityTransition.js';\nimport '../../../../components/PasskeyCreatedSuccessBanner/PasskeyCreatedSuccessBanner.js';\nimport '../../../../components/Popper/Popper/Popper.js';\nimport '../../../../components/Popper/PopperContext/PopperContext.js';\nimport 'react-focus-lock';\nimport 'qrcode';\nimport 'formik';\nimport '../../useSubdomainCheck/useSubdomainCheck.js';\nimport '../../../../context/WalletGroupContext/WalletGroupContext.js';\nimport '../../../../context/IpConfigurationContext/IpConfigurationContext.js';\nimport '../../../../context/ConnectWithOtpContext/ConnectWithOtpContext.js';\nimport '../../../../context/ConnectWithOtpContext/constants.js';\nimport '../../../../widgets/DynamicBridgeWidget/views/WalletsView/components/SecondaryWallets/SecondaryWallets.js';\nimport '@hcaptcha/react-hcaptcha';\nimport '../../../../widgets/DynamicWidget/context/DynamicWidgetContext.js';\nimport '../../../../context/FooterAnimationContext/index.js';\nimport '../../../../context/ErrorContext/hooks/useErrorText/useErrorText.js';\nimport '../../../../context/PasskeyContext/PasskeyContext.js';\nimport '../../../../store/state/sendBalances.js';\nimport '../../../../store/state/connectorsInitializing/connectorsInitializing.js';\nimport '../../../../components/OverlayCardBase/OverlayCardTarget/OverlayCardTarget.js';\nimport '../../../../widgets/DynamicWidget/components/DynamicWidgetHeader/DynamicWidgetHeader.js';\nimport '../../../../views/TransactionConfirmationView/TransactionConfirmationView.js';\nimport '../../../../widgets/DynamicWidget/views/ManagePasskeysWidgetView/PasskeyCard/PasskeyCard.js';\nimport '../../../../context/OnrampContext/OnrampContext.js';\nimport '../../../../widgets/DynamicWidget/views/ReceiveWalletFunds/ReceiveWalletFunds.js';\nimport '../../../../../index.js';\nimport '../../../../store/state/tokenBalances.js';\nimport '../../../../shared/utils/functions/getInitialUrl/getInitialUrl.js';\nimport { useInternalDynamicContext } from '../../../../context/DynamicContext/useDynamicContext/useInternalDynamicContext.js';\n\nconst useSignConnectOnlyUser = () => {\n    const { pushView } = useViewContext();\n    const { setErrorMessage } = useErrorContext();\n    const { getCaptchaToken } = useCaptchaContext();\n    const { connectWallet, displaySiweStatement, projectSettings, environmentId, setIsSingleWalletAccount, setShowAuthFlow, setSelectedWalletConnectorKey, walletUiUtils, } = useInternalDynamicContext();\n    const verifyWallet = useVerifyWallet({\n        displaySiweStatement,\n        environmentId,\n        projectSettings,\n        setIsSingleWalletAccount,\n    });\n    return (_a) => __awaiter(void 0, [_a], void 0, function* ({ walletConnector, getAddressOpts = undefined }) {\n        try {\n            if (isEmbeddedConnector(walletConnector) &&\n                !isBloctoConnector(walletConnector)) {\n                walletUiUtils.disabledConfirmationOnce();\n            }\n            // Prepare states to show the pending signature view (without back button)\n            // We need this because in connect-only we don't want to show wallet-list\n            // We don't want to show the back button in the pending signature view\n            // because we don't want to go back to the wallet-list\n            setSelectedWalletConnectorKey(walletConnector.key);\n            pushView('pending-signature-without-back-button');\n            setShowAuthFlow(true);\n            // Wallet should be already connected at this point\n            // We just need to verify it\n            const connectionResult = yield connectWallet(walletConnector, getAddressOpts);\n            if (!(connectionResult === null || connectionResult === void 0 ? void 0 : connectionResult.address)) {\n                return;\n            }\n            yield verifyWallet({\n                captchaToken: getCaptchaToken(),\n                publicWalletAddress: connectionResult.address,\n                walletConnector,\n            });\n        }\n        catch (err) {\n            logger.debug(err);\n            setErrorMessage(err.toString());\n            setShowAuthFlow(false, { emitCancelAuth: true });\n            return;\n        }\n    });\n};\n\nexport { useSignConnectOnlyUser };\n"],"names":[],"mappings":";;;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA3FA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6FA,MAAM,yBAAyB;IAC3B,MAAM,EAAE,QAAQ,EAAE,GAAG,CAAA,GAAA,mNAAA,CAAA,iBAAc,AAAD;IAClC,MAAM,EAAE,eAAe,EAAE,GAAG,CAAA,GAAA,qNAAA,CAAA,kBAAe,AAAD;IAC1C,MAAM,EAAE,eAAe,EAAE,GAAG,CAAA,GAAA,yNAAA,CAAA,oBAAiB,AAAD;IAC5C,MAAM,EAAE,aAAa,EAAE,oBAAoB,EAAE,eAAe,EAAE,aAAa,EAAE,wBAAwB,EAAE,eAAe,EAAE,6BAA6B,EAAE,aAAa,EAAG,GAAG,CAAA,GAAA,yPAAA,CAAA,4BAAyB,AAAD;IAClM,MAAM,eAAe,CAAA,GAAA,kOAAA,CAAA,kBAAe,AAAD,EAAE;QACjC;QACA;QACA;QACA;IACJ;IACA,OAAO,CAAC,KAAO,CAAA,GAAA,kLAAA,CAAA,YAAS,AAAD,EAAE,KAAK,GAAG;YAAC;SAAG,EAAE,KAAK,GAAG,UAAW,EAAE,eAAe,EAAE,iBAAiB,SAAS,EAAE;YACrG,IAAI;gBACA,IAAI,CAAA,GAAA,iOAAA,CAAA,sBAAmB,AAAD,EAAE,oBACpB,CAAC,CAAA,GAAA,6NAAA,CAAA,oBAAiB,AAAD,EAAE,kBAAkB;oBACrC,cAAc,wBAAwB;gBAC1C;gBACA,0EAA0E;gBAC1E,yEAAyE;gBACzE,sEAAsE;gBACtE,sDAAsD;gBACtD,8BAA8B,gBAAgB,GAAG;gBACjD,SAAS;gBACT,gBAAgB;gBAChB,mDAAmD;gBACnD,4BAA4B;gBAC5B,MAAM,mBAAmB,MAAM,cAAc,iBAAiB;gBAC9D,IAAI,CAAC,CAAC,qBAAqB,QAAQ,qBAAqB,KAAK,IAAI,KAAK,IAAI,iBAAiB,OAAO,GAAG;oBACjG;gBACJ;gBACA,MAAM,aAAa;oBACf,cAAc;oBACd,qBAAqB,iBAAiB,OAAO;oBAC7C;gBACJ;YACJ,EACA,OAAO,KAAK;gBACR,8LAAA,CAAA,SAAM,CAAC,KAAK,CAAC;gBACb,gBAAgB,IAAI,QAAQ;gBAC5B,gBAAgB,OAAO;oBAAE,gBAAgB;gBAAK;gBAC9C;YACJ;QACJ;AACJ","ignoreList":[0],"debugId":null}}]
}